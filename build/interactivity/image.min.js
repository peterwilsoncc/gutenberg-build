import*as t from"@wordpress/interactivity";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const n=(o={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},r={},e.d(r,o),r);var o,r;let i=!1,a=0;const{state:l,actions:c,callbacks:g}=(0,n.store)("core/image",{state:{currentImage:{},get overlayOpened(){return l.currentImage.currentSrc},get roleAttribute(){return l.overlayOpened?"dialog":null},get ariaModal(){return l.overlayOpened?"true":null},get enlargedSrc(){return l.currentImage.uploadedSrc||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},get imgStyles(){return l.overlayOpened&&`${l.currentImage.imgStyles?.replace(/;$/,"")}; object-fit:cover;`}},actions:{showLightbox(){const t=(0,n.getContext)();t.imageRef?.complete&&(l.scrollTopReset=document.documentElement.scrollTop,l.scrollLeftReset=document.documentElement.scrollLeft,t.currentSrc=t.imageRef.currentSrc,l.currentImage=t,l.overlayEnabled=!0,g.setOverlayStyles())},hideLightbox(){l.overlayEnabled&&(setTimeout((function(){l.currentImage.buttonRef.focus({preventScroll:!0}),l.currentImage={}}),450),l.showClosingAnimation=!0,l.overlayEnabled=!1)},handleKeydown(t){if(l.overlayEnabled){if("Tab"===t.key){t.preventDefault();const{ref:e}=(0,n.getElement)();e.querySelector("button").focus()}"Escape"===t.key&&c.hideLightbox()}},handleTouchMove(t){l.overlayEnabled&&t.preventDefault()},handleTouchStart(){i=!0},handleTouchEnd(){a=Date.now(),i=!1},handleScroll(){l.overlayOpened&&!i&&Date.now()-a>450&&window.scrollTo(l.scrollLeftReset,l.scrollTopReset)}},callbacks:{setOverlayStyles(){if(!l.currentImage.imageRef)return;let{naturalWidth:t,naturalHeight:e,offsetWidth:n,offsetHeight:o}=l.currentImage.imageRef,{x:r,y:i}=l.currentImage.imageRef.getBoundingClientRect();const a=t/e;let c=n/o;if("contain"===l.currentImage.scaleAttr)if(a>c){const t=n/a;i+=(o-t)/2,o=t}else{const t=o*a;r+=(n-t)/2,n=t}c=n/o;let g=parseFloat("none"!==l.currentImage.targetWidth?l.currentImage.targetWidth:t),s=parseFloat("none"!==l.currentImage.targetHeight?l.currentImage.targetHeight:e),u=g/s,d=g,m=s,h=g,p=s;if(a.toFixed(2)!==u.toFixed(2)){if(a>u){const t=g/a;s-t>g?(s=t,g=t*a):s=g/a}else{const t=s*a;g-t>s?(g=t,s=t/a):g=s*a}h=g,p=s,u=g/s,c>u?(d=g,m=d/c):(m=s,d=m*c)}(n>h||o>p)&&(h=n,p=o);let f=0;window.innerWidth>480?f=80:window.innerWidth>1920&&(f=160);const w=Math.min(window.innerWidth-f,h),y=Math.min(window.innerHeight-80,p);c>w/y?(h=w,p=h/c):(p=y,h=p*c);const b=n/h,x=g*(h/d),v=s*(p/m);l.overlayStyles=`\n\t\t\t\t:root {\n\t\t\t\t\t--wp--lightbox-initial-top-position: ${i}px;\n\t\t\t\t\t--wp--lightbox-initial-left-position: ${r}px;\n\t\t\t\t\t--wp--lightbox-container-width: ${h+1}px;\n\t\t\t\t\t--wp--lightbox-container-height: ${p+1}px;\n\t\t\t\t\t--wp--lightbox-image-width: ${x}px;\n\t\t\t\t\t--wp--lightbox-image-height: ${v}px;\n\t\t\t\t\t--wp--lightbox-scale: ${b};\n\t\t\t\t\t--wp--lightbox-scrollbar-width: ${window.innerWidth-document.documentElement.clientWidth}px;\n\t\t\t\t}\n\t\t\t`},setButtonStyles(){const t=(0,n.getContext)(),{ref:e}=(0,n.getElement)();t.imageRef=e;const{naturalWidth:o,naturalHeight:r,offsetWidth:i,offsetHeight:a}=e;if(0===o||0===r)return;const l=e.parentElement,c=e.parentElement.clientWidth;let g=e.parentElement.clientHeight;const s=l.querySelector("figcaption");if(s){const t=window.getComputedStyle(s);["absolute","fixed"].includes(t.position)||(g=g-s.offsetHeight-parseFloat(t.marginTop)-parseFloat(t.marginBottom))}const u=g-a,d=c-i;if("contain"===t.scaleAttr){const e=o/r;if(e>=i/a){const n=i/e;t.imageButtonTop=(a-n)/2+u+16,t.imageButtonRight=d+16}else{const n=a*e;t.imageButtonTop=u+16,t.imageButtonRight=(i-n)/2+d+16}}else t.imageButtonTop=u+16,t.imageButtonRight=d+16},setOverlayFocus(){if(l.overlayEnabled){const{ref:t}=(0,n.getElement)();t.focus()}},initTriggerButton(){const t=(0,n.getContext)(),{ref:e}=(0,n.getElement)();t.buttonRef=e}}},{lock:!0});
//# sourceMappingURL=image.min.js.map